(function(h){h.fn.ddslick=function(r){if(d[r]){return d[r].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof r==="object"||!r){return d.init.apply(this,arguments)}else{h.error("Method "+r+" does not exists.")}}};var d={},e={data:[],keepJSONItemsOnTop:false,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:true,imagePosition:"left",showSelectedHTML:true,clickOffToClose:true,embedCSS:true,onSelected:function(){},enableKeyboard:true},q={enter:13,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},a='<ul class="dd-options"></ul>',c='<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-disabled .dd-selected{ color: #8293a9;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-disabled .dd-pointer-down{ transparent; border-top:solid 5px #8293a9; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image, .dd-selected-csssprite, dd-image-left{ vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}? .dd-selected-text { font-weight:bold}?</style>';d.init=function(s){var r=h.extend({},e,s);if(h("#css-ddslick").length<=0&&r.embedCSS){h(c).appendTo("head")}return this.each(function(){var C=h.extend({},e,s);var w=h(this),x=w.data("ddslick");if(!x){var u=[],v=C.data;w.find("option").each(function(){var E=h(this),D=E.data();u.push({text:h.trim(E.text()),value:E.val(),selected:E.is(":selected"),description:D.description,cssSprite:D.csssprite,imageSrc:D.imagesrc})});if(C.keepJSONItemsOnTop){h.merge(C.data,u)}else{C.data=h.merge(u,C.data)}var t=w,z=h("<div>").attr("id",w.attr("id")+"-dd-placeholder").attr("tabindex","0");w.replaceWith(z);w=z;ddSelectHtml='<div class="dd-select"><input class="dd-selected-value" name="'+t.attr("name")+'" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>';w.addClass("dd-container").append(ddSelectHtml).append(a);w.find("input.dd-selected-value").attr("id",h(t).attr("id")).attr("name",h(t).attr("name"));if(h(t).is(":disabled")){g(w)}var u=w.find(".dd-select"),B=w.find(".dd-options");B.css({width:C.width});u.css({width:C.width,background:C.background});w.css({width:C.width});if(C.height!=null){B.css({height:C.height,overflow:"auto"})}h.each(C.data,function(D,E){if(E.selected){C.defaultSelectedIndex=D}B.append('<li><a class="dd-option">'+(E.value?' <input class="dd-option-value" type="hidden" value="'+E.value+'" />':"")+(E.cssSprite?' <span class="dd-selected-csssprite'+(C.imagePosition=="right"?" dd-image-right "+E.cssSprite:" dd-image-left "+E.cssSprite)+'" />':"")+(E.imageSrc?' <img class="dd-option-image'+(C.imagePosition=="right"?" dd-image-right":"")+'" src="'+E.imageSrc+'" />':"")+(E.text?' <label class="dd-option-text">'+E.text+"</label>":"")+(E.description?' <small class="dd-option-description dd-desc">'+E.description+"</small>":"")+"</a></li>")});var A={settings:C,original:t,selectedIndex:-1,selectedItem:null,selectedData:null};w.data("ddslick",A);if(C.selectText.length>0&&C.defaultSelectedIndex==null){w.find(".dd-selected").html(C.selectText)}else{var y=(C.defaultSelectedIndex!=null&&C.defaultSelectedIndex>=0&&C.defaultSelectedIndex<C.data.length)?C.defaultSelectedIndex:0;n(w,y)}w.find(".dd-select").on("click.ddslick",function(){j(w)});w.find(".dd-option").on("click.ddslick",function(){n(w,h(this).closest("li").index())});if(C.clickOffToClose){B.addClass("dd-click-off-close");w.on("click.ddslick",function(D){D.stopPropagation()});h("body").on("click",function(){h(".dd-open").removeClass("dd-open");h(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")})}if(C.enableKeyboard){w.on("keydown.ddslick",function(D){return f(w,D)})}}})};d.select=function(r){return this.each(function(){if(r.index!==undefined){n(h(this),r.index)}if(r.id){b(h(this),r.id)}})};d.open=function(){return this.each(function(){var s=h(this),r=s.data("ddslick");if(r){j(s)}})};d.close=function(){return this.each(function(){var s=h(this),r=s.data("ddslick");if(r){p(s)}})};d.destroy=function(){return this.each(function(){var t=h(this),s=t.data("ddslick");if(s){var r=s.original;t.removeData("ddslick").unbind(".ddslick").replaceWith(r)}})};d.disable=function(){return this.each(function(){var r=h(this);g(r)})};d.enable=function(){return this.each(function(){var r=h(this);i(r)})};function b(s,t){var r=s.find(".dd-option-value[value= '"+t+"']").parents("li").prevAll().length;n(s,r)}function n(x,z,t){var B=x.data("ddslick");var y=x.find(".dd-selected"),u=y.siblings(".dd-selected-value"),C=x.find(".dd-options"),r=y.siblings(".dd-pointer"),w=x.find(".dd-option").eq(z),s=w.closest("li"),v=B.settings,A=B.settings.data[z];x.find(".dd-option").removeClass("dd-option-selected");w.addClass("dd-option-selected");B.selectedIndex=z;B.selectedItem=s;B.selectedData=A;if(v.showSelectedHTML){y.html((A.cssSprite?'<span class="dd-selected-csssprite'+(v.imagePosition=="right"?" dd-image-right "+A.cssSprite:" dd-image-left "+A.cssSprite)+'" />':"")+(A.imageSrc?'<img class="dd-selected-image'+(v.imagePosition=="right"?" dd-image-right":"")+'" src="'+A.imageSrc+'" />':"")+(A.text?'<label class="dd-selected-text">'+A.text+"</label>":"")+(A.description?'<small class="dd-selected-description dd-desc'+(v.truncateDescription?" dd-selected-description-truncated":"")+'" >'+A.description+"</small>":""))}else{y.html(A.text)}u.val(A.value);B.original.val(A.value);x.data("ddslick",B);if(t===undefined||t){p(x)}k(x);if(typeof v.onSelected=="function"){v.onSelected.call(this,B)}}function j(v){if(!o(v)){var u=v.find(".dd-select"),s=u.siblings(".dd-options"),r=u.find(".dd-pointer"),t=s.is(":visible");h(".dd-click-off-close").not(s).slideUp(50);h(".dd-pointer").removeClass("dd-pointer-up");u.removeClass("dd-open");if(t){s.slideUp("fast");r.removeClass("dd-pointer-up");u.removeClass("dd-open")}else{u.addClass("dd-open");s.slideDown("fast");r.addClass("dd-pointer-up")}l(v)}}function p(r){r.find(".dd-select").removeClass("dd-open");r.find(".dd-options").slideUp(50);r.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function o(r){if(r.hasClass("dd-disabled")){return true}return false}function g(r){r.addClass("dd-disabled");r.removeAttr("tabindex")}function i(r){if(r.hasClass("dd-disabled")){r.removeClass("dd-disabled");r.attr("tabindex","0")}}function k(v){var t=v.find(".dd-select").css("height");var s=v.find(".dd-selected-description");var r=v.find(".dd-selected-image");var u=v.find(".dd-selected-csssprite");if((s.length<=0&&r.length>0)||(s.length<=0&&u.length>0)){v.find(".dd-selected-text").css("lineHeight",t)}}function l(r){r.find(".dd-option").each(function(){var w=h(this);var u=w.css("height");var v=w.find(".dd-option-description");var t=r.find(".dd-option-image");var s=r.find(".dd-selected-csssprite");if((v.length<=0&&t.length>0)||(v.length<=0&&s.length>0)){w.find(".dd-option-text").css("lineHeight",u)}})}function f(w,v){var u=w.find(".dd-select").siblings(".dd-options"),r=w.data("ddslick");var s=v.keyCode||v.which;if(v.altKey&&s==q.downArrow){j(w);return false}else{if(s==q.enter){if(u.is(":visible")){p(w)}return false}else{if(s==q.leftArrow||s==q.upArrow){var x=r.selectedIndex-1;if(x>=0){m(w,u,x)}return false}else{if(s==q.rightArrow||s==q.downArrow){var t=r.selectedIndex+1;if(t<r.settings.data.length){m(w,u,t)}return false}else{if(s==q.pageUp||s==q.home){if(r.selectedIndex!=0){m(w,u,0)}return false}else{if(s==q.pageDown||s==q.end){if(r.selectedIndex!=r.settings.data.length-1){m(w,u,r.settings.data.length-1)}return false}else{return true}}}}}}}function m(u,s,r){var t=s.is(":visible");if(t){n(u,r,false)}else{n(u,r)}}})(jQuery);